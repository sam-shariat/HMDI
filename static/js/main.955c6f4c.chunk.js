(this["webpackJsonpalgorand-marketplace"]=this["webpackJsonpalgorand-marketplace"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return x})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"j",(function(){return O})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return y}));var r=n(17),a=n.n(r),c=n(186),o=n.n(c),s="",i="https://node.testnet.algoexplorerapi.io",l="",u="",d="https://algoindexer.testnet.algoexplorerapi.io",b="",j=new a.a.Algodv2(s,i,l),p=new a.a.Indexer(u,d,b),x=new o.a,f=21540981,m="mj-marketplace:uv01",O=0,h=0,g=4,v=4,y=6},16:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u}));var r=n(10),a=n(117),c=n.n(a),o=function(e){if(e)return e.slice(0,5)+"..."+e.slice(e.length-5,e.length)},s=function(e){if(e)return new c.a(e).shiftedBy(-r.a).toFixed(3)},i=function(e){if(e)return new c.a(e).shiftedBy(r.a).toNumber()},l=function(t){return e.from(t,"base64").toString("utf-8")},u=function(t){return e.from(t,"utf8").toString("base64")}}).call(this,n(14).Buffer)},190:function(e,t,n){"use strict";t.a='#pragma version 6\r\ntxn ApplicationID\r\nint 0\r\n==\r\nbnz main_l8\r\ntxn OnCompletion\r\nint DeleteApplication\r\n==\r\nbnz main_l7\r\ntxna ApplicationArgs 0\r\nbyte "buy"\r\n==\r\nbnz main_l4\r\nerr\r\nmain_l4:\r\nglobal GroupSize\r\nint 2\r\n==\r\ngtxn 1 TypeEnum\r\nint pay\r\n==\r\ngtxn 1 Receiver\r\nglobal CreatorAddress\r\n==\r\n&&\r\ngtxn 1 Amount\r\nbyte "PRICE"\r\napp_global_get\r\ntxna ApplicationArgs 1\r\nbtoi\r\n*\r\n==\r\n&&\r\ngtxn 1 Sender\r\ngtxn 0 Sender\r\n==\r\n&&\r\n&&\r\nbnz main_l6\r\nint 0\r\nreturn\r\nmain_l6:\r\nbyte "SOLD"\r\nbyte "SOLD"\r\napp_global_get\r\ntxna ApplicationArgs 1\r\nbtoi\r\n+\r\napp_global_put\r\nint 1\r\nreturn\r\nmain_l7:\r\ntxn Sender\r\nglobal CreatorAddress\r\n==\r\nreturn\r\nmain_l8:\r\ntxn NumAppArgs\r\nint 6\r\n==\r\nassert\r\ntxn Note\r\nbyte "mj-marketplace:uv01"\r\n==\r\nassert\r\ntxna ApplicationArgs 4\r\nbtoi\r\nint 0\r\n>\r\nassert\r\ntxna ApplicationArgs 5\r\nbtoi\r\nint 0\r\n>\r\nassert\r\nbyte "NAME"\r\ntxna ApplicationArgs 0\r\napp_global_put\r\nbyte "IMAGE"\r\ntxna ApplicationArgs 1\r\napp_global_put\r\nbyte "DESCRIPTION"\r\ntxna ApplicationArgs 2\r\napp_global_put\r\nbyte "LINK"\r\ntxna ApplicationArgs 3\r\napp_global_put\r\nbyte "PRICE"\r\ntxna ApplicationArgs 4\r\nbtoi\r\napp_global_put\r\nbyte "NEEDEDPRICE"\r\ntxna ApplicationArgs 5\r\nbtoi\r\napp_global_put\r\nbyte "SOLD"\r\nint 0\r\napp_global_put\r\nint 1\r\nreturn'},191:function(e,t,n){"use strict";t.a="#pragma version 6\r\nint 1\r\nreturn"},202:function(e,t,n){},223:function(e,t){},225:function(e,t){},236:function(e,t){},238:function(e,t){},263:function(e,t){},265:function(e,t){},266:function(e,t){},271:function(e,t){},273:function(e,t){},279:function(e,t){},281:function(e,t){},300:function(e,t){},312:function(e,t){},315:function(e,t){},335:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),o=n.n(c),s=n(12),i=n(22),l=n(6),u=n(185),d=n(192),b=n(1),j=function(e){var t=e.name,n=e.sub,r=e.coverImg,a=e.connect;return Object(b.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center bg-black bg-gradient min-vh-100",children:[Object(b.jsxs)("div",{className:"mt-auto text-light mb-5",children:[Object(b.jsx)("div",{style:{height:50},className:"mb-5",children:Object(b.jsx)(d.a,{src:r,style:{height:50}})}),Object(b.jsx)("div",{className:"pt-2 d-flex justify-content-center align-items-center flex-column text-center",children:Object(b.jsxs)("div",{className:"w-75",children:[Object(b.jsx)("h1",{children:t}),Object(b.jsx)("p",{className:"fs-4",children:n})]})}),Object(b.jsx)("p",{children:"Please connect your wallet to continue."}),Object(b.jsx)(u.a,{onClick:function(){return a()},variant:"outline-light",className:"rounded-pill px-4 py-2 mt-3",children:"Connect Wallet"})]}),Object(b.jsx)("p",{className:"mt-auto text-secondary",children:"Powered by Algorand"})]})},p=(n(202),n(345)),x=n(341),f=n(350),m=n(16),O=n(2),h=n(3),g=n(187),v=n.n(g),y=["size","address"],N=function(e){var t=e.size,n=e.address,r=Object(h.a)(e,y);return Object(b.jsx)("div",Object(O.a)(Object(O.a)({},r),{},{style:{width:"".concat(t,"px"),height:"".concat(t,"px")},children:Object(b.jsx)(v.a,{diameter:t,seed:parseInt(n.slice(2,10),16)})}))},w=function(e){var t=e.address,n=e.name,r=e.amount,a=e.symbol,c=e.disconnect;return t?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(p.a,{children:[Object(b.jsxs)(p.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:[r?Object(b.jsxs)(b.Fragment,{children:[Object(m.b)(r),Object(b.jsxs)("span",{className:"ms-1",children:[" ",a]})]}):Object(b.jsx)(x.a,{animation:"border",size:"sm",className:"opacity-25"}),Object(b.jsx)(N,{address:t,size:28,className:"ms-2 me-1"})]}),Object(b.jsxs)(p.a.Menu,{className:"shadow-lg border-0",children:[Object(b.jsx)(p.a.Item,{href:"https://testnet.algoexplorer.io/address/".concat(t),target:"_blank",children:Object(b.jsxs)(f.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(b.jsxs)("div",{className:"d-flex flex-column",children:[n&&Object(b.jsx)("span",{className:"font-monospace",children:n}),Object(b.jsx)("span",{className:"font-monospace",children:Object(m.d)(t)})]})]})}),Object(b.jsx)(p.a.Divider,{}),Object(b.jsxs)(p.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){c()},children:[Object(b.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null},A=n(344),I=n(348),C=n(35),P=n(346),k=n(347),T=n(189),D=function(e){var t=e.createProduct,n=Object(r.useState)(""),a=Object(l.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(""),i=Object(l.a)(s,2),d=i[0],j=i[1],p=Object(r.useState)(""),x=Object(l.a)(p,2),f=x[0],O=x[1],h=Object(r.useState)(""),g=Object(l.a)(h,2),v=g[0],y=g[1],N=Object(r.useState)(0),w=Object(l.a)(N,2),A=w[0],I=w[1],C=Object(r.useState)(0),D=Object(l.a)(C,2),E=D[0],S=D[1],F=Object(r.useCallback)((function(){return!(c.length>162||c.length<1)&&(console.log(c),!(d.length>162||d.length<1)&&(console.log(d),!(f.length>162||f.length<1)&&(console.log(f),!(v.length>162||v.length<1)&&(console.log(v),!(Number(A)/1e6>=100||Number(A)/1e6<1)&&(!(Number(E)/1e6>=1e4||Number(E)/1e6<1)&&(!(Number(E)<0||Number(A)<0)&&(console.log(E),!0)))))))}),[c,d,f,v,A,E]),_=Object(r.useState)(!1),L=Object(l.a)(_,2),R=L[0],M=L[1],G=function(){return M(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(u.a,{onClick:function(){return M(!0)},variant:"dark",className:"rounded-pill px-0",style:{width:"138px"},children:[Object(b.jsx)("i",{className:"bi bi-plus"}),"Add Project"]}),Object(b.jsxs)(P.a,{show:R,onHide:G,centered:!0,children:[Object(b.jsxs)(P.a.Header,{className:"d-flex flex-column",children:[Object(b.jsx)(P.a.Title,{children:"Raise Funds"}),Object(b.jsx)("p",{children:"Tell Us More About Your Project"})]}),Object(b.jsx)(k.a,{children:Object(b.jsxs)(P.a.Body,{children:[Object(b.jsx)(T.a,{controlId:"inputName",label:"Project Name",className:"mb-3",children:Object(b.jsx)(k.a.Control,{type:"text",onChange:function(e){o(e.target.value)},placeholder:"Enter name of project"})}),Object(b.jsx)(T.a,{controlId:"inputUrl",label:"Image URL Of Your Project",className:"mb-3",children:Object(b.jsx)(k.a.Control,{type:"text",placeholder:"Image URL https://example.com/image.jpg",value:d,onChange:function(e){j(e.target.value)}})}),Object(b.jsx)(T.a,{controlId:"inputDescription",label:"Description ( Max 162 Chars )",className:"mb-3",children:Object(b.jsx)(k.a.Control,{as:"textarea",placeholder:"I need 200 ALGOs to build a website to promote what I do",maxLength:162,style:{height:"80px"},onChange:function(e){O(e.target.value)}})}),Object(b.jsx)(T.a,{controlId:"inputLinkUrl",label:"Link To Proposal",className:"mb-3",children:Object(b.jsx)(k.a.Control,{type:"text",placeholder:"Link to your proposal",value:v,onChange:function(e){y(e.target.value)}})}),Object(b.jsx)(T.a,{controlId:"inputPrice",label:"Each Donation (Max 99)",className:"mb-3",children:Object(b.jsx)(k.a.Control,{type:"text",max:10,placeholder:"Each Donation in ALGO (Max 99)",onChange:function(e){I(Object(m.c)(e.target.value))}})}),Object(b.jsx)(T.a,{controlId:"inputNeededPrice",label:"Total Donation Goal (Max 9999)",className:"mb-3",children:Object(b.jsx)(k.a.Control,{type:"text",max:10,placeholder:"Total Needed Donation in ALGO (Max 9999)",onChange:function(e){S(Object(m.c)(e.target.value))}})})]})}),Object(b.jsxs)(P.a.Footer,{children:[Object(b.jsx)(u.a,{variant:"outline-secondary",onClick:G,children:"Close"}),Object(b.jsx)(u.a,{variant:"primary",disabled:!F(),onClick:function(){t({name:c,image:d,description:f,link:v,price:A,neededprice:E}),G()},children:"Save Project To Start Raising Funds"})]})]})]})},E=n(188),S=n(349),F=n(342),_=function(e){var t=e.address,n=e.product,a=e.buyProduct,c=e.deleteProduct,o=n.name,s=n.image,i=n.description,d=n.link,j=n.price,p=n.neededprice,x=n.sold,O=n.appId,h=n.owner,g=Object(r.useState)(1),v=Object(l.a)(g,2),y=v[0],w=v[1],A=Object(m.b)(j)*x,I=Math.round(A/Object(m.b)(p)*100);return console.log(A),console.log(I),console.log(Object(m.b)(p)),Object(b.jsx)(E.a,{children:Object(b.jsxs)(S.a,{className:"h-100",children:[Object(b.jsx)(S.a.Header,{children:Object(b.jsxs)(f.a,{direction:"horizontal",gap:2,children:[Object(b.jsx)(N,{size:28,address:h}),Object(b.jsx)("span",{className:"font-monospace text-secondary",children:Object(m.d)(h)}),Object(b.jsxs)(F.a,{bg:"secondary",className:"ms-auto",children:[x," Donated"]})]})}),Object(b.jsx)("div",{className:"ratio ratio-4x3",children:Object(b.jsx)("img",{src:s,alt:o,style:{objectFit:"cover"}})}),Object(b.jsxs)(S.a.Body,{className:"d-flex flex-column text-center",children:[Object(b.jsx)(S.a.Title,{children:o}),Object(b.jsx)(S.a.Text,{className:"flex-grow-1",children:i}),Object(b.jsx)(S.a.Link,{className:"text-decoration-none pb-4 pt-2 fw-bold",href:d,target:"_blank",children:"View Proposal"}),Object(b.jsxs)(k.a,{className:"d-flex align-content-stretch flex-row gap-2",children:[Object(b.jsx)(T.a,{controlId:"inputCount",label:"Count",className:"w-25",children:Object(b.jsx)(k.a.Control,{type:"number",value:y,min:"1",max:"10",required:!0,onChange:function(e){w(Number(e.target.value))}})}),Object(b.jsxs)(u.a,{variant:"outline-dark",disabled:Object(m.b)(j)*x>=Object(m.b)(p),onClick:function(){return a(n,y)},className:"w-75 py-3",children:["Donate ",Object(m.b)(j)*y," ALGO",Object(m.b)(j)>1?"s":""]}),n.owner===t&&Object(b.jsx)(u.a,{variant:"outline-danger",onClick:function(){return c(n)},className:"btn",children:Object(b.jsx)("i",{className:"bi bi-trash"})})]})]}),Object(b.jsxs)(S.a.Footer,{className:"pb-1",children:[Object(b.jsx)("div",{className:"progress",children:Object(b.jsxs)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(I,"%")},"aria-valuenow":"".concat(I),"aria-valuemin":"0","aria-valuemax":"100",children:[I,"%"]})}),Object(b.jsxs)("p",{className:"w-100 text-center pt-4 pb-0",children:[A," ALGOs gathered out of ",p/1e6," ALGOs"]})]})]})},O)},L=function(){return Object(b.jsx)("div",{className:"d-flex justify-content-center h-300",children:Object(b.jsx)(x.a,{animation:"border",role:"status",className:"opacity-25",children:Object(b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},R=function(){return Object(b.jsx)(C.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},M=function(e){var t=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:t})]})},G=function(e){var t=e.text;return Object(b.jsxs)("div",{children:[Object(b.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(b.jsx)("span",{className:"text-secondary mx-1",children:t})]})},B={text:""};M.defaultProps=B,G.defaultProps=B;var z=n(74),U=n(343),H=function(e){var t=e.address,n=e.fetchBalance,a=Object(r.useState)([]),c=Object(l.a)(a,2),o=c[0],u=c[1],d=Object(r.useState)(!1),j=Object(l.a)(d,2),p=j[0],x=j[1],f=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(z.d)().then((function(e){e&&(u(e),console.log(e))})).catch((function(e){console.log(e)})).finally((function(e){x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){f()}),[]);var m=function(){var e=Object(i.a)(Object(s.a)().mark((function e(r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(z.b)(t,r).then((function(){Object(C.b)(Object(b.jsx)(M,{text:"Project added successfully."})),f(),n(t)})).catch((function(e){console.log(e),Object(C.b)(Object(b.jsx)(G,{text:"Failed to create a project."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(Object(s.a)().mark((function e(r,a){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(z.a)(t,r,a).then((function(){Object(C.b)(Object(b.jsx)(M,{text:"Donated to Project successfully"})),f(),n(t)})).catch((function(e){console.log(e),Object(C.b)(Object(b.jsx)(G,{text:"Failed to Donate Project. Please Try Again"})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(Object(s.a)().mark((function e(r){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),Object(z.c)(t,r.appId).then((function(){Object(C.b)(Object(b.jsx)(M,{text:"Project deleted successfully"})),f(),n(t)})).catch((function(e){console.log(e),Object(C.b)(Object(b.jsx)(G,{text:"Failed to delete project."})),x(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?Object(b.jsx)(L,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(b.jsx)("h1",{className:"fs-4 fw-bold mb-0",children:"FundRaising Projects"}),Object(b.jsx)(D,{createProduct:m})]}),Object(b.jsx)(U.a,{xs:1,sm:2,lg:3,className:"g-3 mb-5 g-xl-4 g-xxl-5",children:Object(b.jsx)(b.Fragment,{children:o.map((function(e,n){return Object(b.jsx)(_,{address:t,product:e,buyProduct:O,deleteProduct:h},n)}))})})]})},Y=n(10),K=n.p+"static/media/balloon.b900d592.svg",X=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(l.a)(c,2),u=o[0],d=o[1],p=Object(r.useState)(0),x=Object(l.a)(p,2),f=x[0],m=x[1],O=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.c.lookupAccountByID(t).do().then((function(e){var t=e.account.amount;m(t)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y.f.connect().then((function(e){var t=e[0];a(t.address),d(t.name),O(t.address)})).catch((function(e){console.log("Could not connect to MyAlgo wallet"),console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(R,{}),n?Object(b.jsxs)(A.a,{fluid:"md",children:[Object(b.jsxs)(I.a,{className:"justify-content-between pt-3 pb-5",children:[Object(b.jsx)(I.a.Item,{children:Object(b.jsx)("h3",{style:{cursor:"pointer"},children:"HelpMeDoit"})}),Object(b.jsx)(I.a.Item,{children:Object(b.jsx)(w,{address:n,name:u,amount:f,disconnect:function(){a(null),d(null),m(null)},symbol:"ALGO"})})]}),Object(b.jsx)("main",{children:Object(b.jsx)(H,{address:n,fetchBalance:O})})]}):Object(b.jsx)(j,{name:"Help Me Do It",sub:"A Decentralized Platform to Raise Funds ( in ALGOs ) For Your Most Important Project and Donate Some ALGO(s) To Help Your Fellows In Need",coverImg:K,connect:h})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,351)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};n(332),n(333),n(334);o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(X,{})}),document.getElementById("root")),J()},74:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return h}));var r=n(62),a=n(12),c=n(22),o=n(60),s=n(59),i=n(17),l=n.n(i),u=n(10),d=n(190),b=n(191),j=n(16),p=Object(o.a)((function e(t,n,r,a,c,o,i,l,u){Object(s.a)(this,e),this.name=t,this.image=n,this.description=r,this.link=a,this.price=c,this.neededprice=o,this.sold=i,this.appId=l,this.owner=u})),x=function(){var t=Object(c.a)(Object(a.a)().mark((function t(n){var r,c,o;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new TextEncoder,c=r.encode(n),t.next=4,u.b.compile(c).do();case 4:return o=t.sent,t.abrupt("return",new Uint8Array(e.from(o.result,"base64")));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c,o,s,i,j,p,f,m,O,h,g,v,y,N,w,A;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding Project..."),e.next=3,u.b.getTransactionParams().do();case 3:return(r=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,r.flatFee=!0,e.next=8,x(d.a);case 8:return c=e.sent,e.next=11,x(b.a);case 11:return o=e.sent,s=(new TextEncoder).encode(u.d),i=(new TextEncoder).encode(n.name),j=(new TextEncoder).encode(n.image),p=(new TextEncoder).encode(n.description),f=(new TextEncoder).encode(n.link),m=l.a.encodeUint64(n.price),O=l.a.encodeUint64(n.neededprice),h=[i,j,p,f,m,O],g=l.a.makeApplicationCreateTxnFromObject({from:t,suggestedParams:r,onComplete:l.a.OnApplicationComplete.NoOpOC,approvalProgram:c,clearProgram:o,numLocalInts:u.j,numLocalByteSlices:u.i,numGlobalInts:u.h,numGlobalByteSlices:u.g,note:s,appArgs:h}),v=g.txID().toString(),e.next=24,u.f.signTransaction(g.toByte());case 24:return y=e.sent,console.log("Signed transaction with txID: %s",v),e.next=28,u.b.sendRawTransaction(y.blob).do();case 28:return e.next=30,l.a.waitForConfirmation(u.b,v,4);case 30:return N=e.sent,console.log("Transaction "+v+" confirmed in round "+N["confirmed-round"]),e.next=34,u.b.pendingTransactionInformation(v).do();case 34:return w=e.sent,A=w["application-index"],console.log("Created new app-id: ",A),e.abrupt("return",A);case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n,r){var c,o,s,i,d,b,j,p,x,f,m,O;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Donating to Product..."),e.next=3,u.b.getTransactionParams().do();case 3:for((c=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,c.flatFee=!0,o=(new TextEncoder).encode("buy"),s=l.a.encodeUint64(r),i=[o,s],d=l.a.makeApplicationCallTxnFromObject({from:t,appIndex:n.appId,onComplete:l.a.OnApplicationComplete.NoOpOC,suggestedParams:c,appArgs:i}),b=l.a.makePaymentTxnWithSuggestedParamsFromObject({from:t,to:n.owner,amount:n.price*r,suggestedParams:c}),j=[d,b],p=l.a.computeGroupID(j),x=0;x<2;x++)j[x].group=p;return e.next=16,u.f.signTransaction(j.map((function(e){return e.toByte()})));case 16:return f=e.sent,console.log("Signed group transaction"),e.next=20,u.b.sendRawTransaction(f.map((function(e){return e.blob}))).do();case 20:return m=e.sent,e.next=23,l.a.waitForConfirmation(u.b,m.txId,4);case 23:O=e.sent,console.log("Group transaction "+m.txId+" confirmed in round "+O["confirmed-round"]);case 25:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t,n){var r,c,o,s,i,d,b;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleting application..."),e.next=3,u.b.getTransactionParams().do();case 3:return(r=e.sent).fee=l.a.ALGORAND_MIN_TX_FEE,r.flatFee=!0,c=l.a.makeApplicationDeleteTxnFromObject({from:t,suggestedParams:r,appIndex:n}),o=c.txID().toString(),e.next=10,u.f.signTransaction(c.toByte());case 10:return s=e.sent,console.log("Signed transaction with txID: %s",o),e.next=14,u.b.sendRawTransaction(s.blob).do();case 14:return e.next=16,l.a.waitForConfirmation(u.b,o,4);case 16:return i=e.sent,console.log("Transaction "+o+" confirmed in round "+i["confirmed-round"]),e.next=20,u.b.pendingTransactionInformation(o).do();case 20:d=e.sent,b=d.txn.txn.apid,console.log("Deleted app-id: ",b);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(Object(a.a)().mark((function t(){var n,c,o,s,i,l,d,b,j;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Fetching products..."),n=(new TextEncoder).encode(u.d),c=e.from(n).toString("base64"),t.next=5,u.c.searchForTransactions().notePrefix(c).txType("appl").minRound(u.e).do();case 5:o=t.sent,s=[],i=Object(r.a)(o.transactions),t.prev=8,i.s();case 10:if((l=i.n()).done){t.next=20;break}if(d=l.value,!(b=d["created-application-index"])){t.next=18;break}return t.next=16,g(b);case 16:(j=t.sent)&&s.push(j);case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(8),i.e(t.t0);case 25:return t.prev=25,i.f(),t.finish(25);case 28:return console.log("Products fetched."),t.abrupt("return",s);case 30:case"end":return t.stop()}}),t,null,[[8,22,25,28]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,r,c,o,s,i,l,d,b,x,f,m,O,h,g;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.c.lookupApplications(t).includeAll(!0).do();case 3:if(!(n=e.sent).application.deleted){e.next=6;break}return e.abrupt("return",null);case 6:return r=n.application.params["global-state"],c=n.application.params.creator,o="",s="",i="",l="",d=0,b=0,x=0,f=function(e,t){return t.find((function(t){return t.key===Object(j.e)(e)}))},void 0!==f("NAME",r)&&(m=f("NAME",r).value.bytes,o=Object(j.a)(m)),void 0!==f("IMAGE",r)&&(O=f("IMAGE",r).value.bytes,s=Object(j.a)(O)),void 0!==f("DESCRIPTION",r)&&(h=f("DESCRIPTION",r).value.bytes,i=Object(j.a)(h)),void 0!==f("LINK",r)&&(g=f("LINK",r).value.bytes,l=Object(j.a)(g)),void 0!==f("PRICE",r)&&(d=f("PRICE",r).value.uint),void 0!==f("NEEDEDPRICE",r)&&(b=f("NEEDEDPRICE",r).value.uint),void 0!==f("SOLD",r)&&(x=f("SOLD",r).value.uint),e.abrupt("return",new p(o,s,i,l,d,b,x,t,c));case 26:return e.prev=26,e.t0=e.catch(0),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(14).Buffer)}},[[335,1,2]]]);
//# sourceMappingURL=main.955c6f4c.chunk.js.map